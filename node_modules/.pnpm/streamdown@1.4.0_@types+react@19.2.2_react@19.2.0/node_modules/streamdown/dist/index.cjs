"use strict";"use client";var Ge=Object.create;var q=Object.defineProperty;var Ke=Object.getOwnPropertyDescriptor;var Qe=Object.getOwnPropertyNames;var Ye=Object.getPrototypeOf,Ze=Object.prototype.hasOwnProperty;var et=(e,t)=>{for(var o in t)q(e,o,{get:t[o],enumerable:!0})},K=(e,t,o,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Qe(t))!Ze.call(e,r)&&r!==o&&q(e,r,{get:()=>t[r],enumerable:!(n=Ke(t,r))||n.enumerable});return e};var x=(e,t,o)=>(o=e!=null?Ge(Ye(e)):{},K(t||!e||!e.__esModule?q(o,"default",{value:e,enumerable:!0}):o,e)),tt=e=>K(q({},"__esModule",{value:!0}),e);var Lt={};et(Lt,{ControlsContext:()=>D,MermaidConfigContext:()=>O,ShikiThemeContext:()=>E,Streamdown:()=>Ve,StreamdownRuntimeContext:()=>I,defaultRehypePlugins:()=>Xe,defaultRemarkPlugins:()=>Je});module.exports=tt(Lt);var M=require("react"),Ee=x(require("react-markdown"),1),_e=x(require("rehype-katex"),1),Oe=x(require("rehype-raw"),1),We=x(require("remark-gfm"),1),Ue=x(require("remark-math"),1),Qt=require("katex/dist/katex.min.css"),ze=require("rehype-harden");var g=require("react");var A=require("lucide-react"),y=require("react"),R=require("shiki"),ee=require("shiki/engine/javascript");var Q=require("clsx"),Y=require("tailwind-merge"),p=(...e)=>(0,Y.twMerge)((0,Q.clsx)(e)),H=(e,t,o)=>{let n=typeof t=="string"?new Blob([t],{type:o}):t,r=URL.createObjectURL(n),s=document.createElement("a");s.href=r,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(r)};var w=require("react/jsx-runtime"),ot=/<pre(\s|>)/,X=(0,y.createContext)({code:""}),z=class{constructor(){this.lightHighlighter=null;this.darkHighlighter=null;this.lightTheme=null;this.darkTheme=null;this.loadedLanguages=new Set;this.initializationPromise=null}isLanguageSupported(t){return Object.hasOwn(R.bundledLanguages,t)}getFallbackLanguage(){return"text"}async ensureHighlightersInitialized(t,o){var c,u;let[n,r]=t,s=(0,ee.createJavaScriptRegexEngine)({forgiving:!0}),i=!this.lightHighlighter||this.lightTheme!==n,d=!this.darkHighlighter||this.darkTheme!==r;(i||d)&&this.loadedLanguages.clear();let a=this.isLanguageSupported(o),l=!this.loadedLanguages.has(o)&&a;if(i?(this.lightHighlighter=await(0,R.createHighlighter)({themes:[n],langs:a?[o]:[],engine:s}),this.lightTheme=n,a&&this.loadedLanguages.add(o)):l&&await((c=this.lightHighlighter)==null?void 0:c.loadLanguage(o)),d){let b=l?[...this.loadedLanguages].concat(a?[o]:[]):Array.from(this.loadedLanguages);this.darkHighlighter=await(0,R.createHighlighter)({themes:[r],langs:b.length>0?b:a?[o]:[],engine:s}),this.darkTheme=r}else l&&await((u=this.darkHighlighter)==null?void 0:u.loadLanguage(o));l&&this.loadedLanguages.add(o)}async highlightCode(t,o,n,r){var u,b;this.initializationPromise&&await this.initializationPromise,this.initializationPromise=this.ensureHighlightersInitialized(n,o),await this.initializationPromise,this.initializationPromise=null;let[s,i]=n,d=this.isLanguageSupported(o)?o:this.getFallbackLanguage(),a=(u=this.lightHighlighter)==null?void 0:u.codeToHtml(t,{lang:d,theme:s}),l=(b=this.darkHighlighter)==null?void 0:b.codeToHtml(t,{lang:d,theme:i}),c=f=>r?f.replace(ot,`<pre class="${r}"$1`):f;return[c(a),c(l)]}},nt=new z,te=({code:e,language:t,className:o,children:n,preClassName:r,...s})=>{let[i,d]=(0,y.useState)(""),[a,l]=(0,y.useState)(""),c=(0,y.useRef)(!1),[u,b]=(0,y.useContext)(E);return(0,y.useEffect)(()=>(c.current=!0,nt.highlightCode(e,t,[u,b],r).then(([f,h])=>{c.current&&(d(f),l(h))}),()=>{c.current=!1}),[e,t,u,b,r]),(0,w.jsx)(X.Provider,{value:{code:e},children:(0,w.jsxs)("div",{className:"my-4 w-full overflow-hidden rounded-xl border","data-code-block-container":!0,"data-language":t,children:[(0,w.jsxs)("div",{className:"flex items-center justify-between bg-muted/80 p-3 text-muted-foreground text-xs","data-code-block-header":!0,"data-language":t,children:[(0,w.jsx)("span",{className:"ml-1 font-mono lowercase",children:t}),(0,w.jsx)("div",{className:"flex items-center gap-2",children:n})]}),(0,w.jsx)("div",{className:"w-full",children:(0,w.jsxs)("div",{className:"min-w-full",children:[(0,w.jsx)("div",{className:p("overflow-x-auto dark:hidden",o),dangerouslySetInnerHTML:{__html:i},"data-code-block":!0,"data-language":t,...s}),(0,w.jsx)("div",{className:p("hidden overflow-x-auto dark:block",o),dangerouslySetInnerHTML:{__html:a},"data-code-block":!0,"data-language":t,...s})]})})]})})},Z={"1c":"1c","1c-query":"1cq",abap:"abap","actionscript-3":"as",ada:"ada",adoc:"adoc","angular-html":"html","angular-ts":"ts",apache:"conf",apex:"cls",apl:"apl",applescript:"applescript",ara:"ara",asciidoc:"adoc",asm:"asm",astro:"astro",awk:"awk",ballerina:"bal",bash:"sh",bat:"bat",batch:"bat",be:"be",beancount:"beancount",berry:"berry",bibtex:"bib",bicep:"bicep",blade:"blade.php",bsl:"bsl",c:"c","c#":"cs","c++":"cpp",cadence:"cdc",cairo:"cairo",cdc:"cdc",clarity:"clar",clj:"clj",clojure:"clj","closure-templates":"soy",cmake:"cmake",cmd:"cmd",cobol:"cob",codeowners:"CODEOWNERS",codeql:"ql",coffee:"coffee",coffeescript:"coffee","common-lisp":"lisp",console:"sh",coq:"v",cpp:"cpp",cql:"cql",crystal:"cr",cs:"cs",csharp:"cs",css:"css",csv:"csv",cue:"cue",cypher:"cql",d:"d",dart:"dart",dax:"dax",desktop:"desktop",diff:"diff",docker:"dockerfile",dockerfile:"dockerfile",dotenv:"env","dream-maker":"dm",edge:"edge",elisp:"el",elixir:"ex",elm:"elm","emacs-lisp":"el",erb:"erb",erl:"erl",erlang:"erl",f:"f","f#":"fs",f03:"f03",f08:"f08",f18:"f18",f77:"f77",f90:"f90",f95:"f95",fennel:"fnl",fish:"fish",fluent:"ftl",for:"for","fortran-fixed-form":"f","fortran-free-form":"f90",fs:"fs",fsharp:"fs",fsl:"fsl",ftl:"ftl",gdresource:"tres",gdscript:"gd",gdshader:"gdshader",genie:"gs",gherkin:"feature","git-commit":"gitcommit","git-rebase":"gitrebase",gjs:"js",gleam:"gleam","glimmer-js":"js","glimmer-ts":"ts",glsl:"glsl",gnuplot:"plt",go:"go",gql:"gql",graphql:"graphql",groovy:"groovy",gts:"gts",hack:"hack",haml:"haml",handlebars:"hbs",haskell:"hs",haxe:"hx",hbs:"hbs",hcl:"hcl",hjson:"hjson",hlsl:"hlsl",hs:"hs",html:"html","html-derivative":"html",http:"http",hxml:"hxml",hy:"hy",imba:"imba",ini:"ini",jade:"jade",java:"java",javascript:"js",jinja:"jinja",jison:"jison",jl:"jl",js:"js",json:"json",json5:"json5",jsonc:"jsonc",jsonl:"jsonl",jsonnet:"jsonnet",jssm:"jssm",jsx:"jsx",julia:"jl",kotlin:"kt",kql:"kql",kt:"kt",kts:"kts",kusto:"kql",latex:"tex",lean:"lean",lean4:"lean",less:"less",liquid:"liquid",lisp:"lisp",lit:"lit",llvm:"ll",log:"log",logo:"logo",lua:"lua",luau:"luau",make:"mak",makefile:"mak",markdown:"md",marko:"marko",matlab:"m",md:"md",mdc:"mdc",mdx:"mdx",mediawiki:"wiki",mermaid:"mmd",mips:"s",mipsasm:"s",mmd:"mmd",mojo:"mojo",move:"move",nar:"nar",narrat:"narrat",nextflow:"nf",nf:"nf",nginx:"conf",nim:"nim",nix:"nix",nu:"nu",nushell:"nu",objc:"m","objective-c":"m","objective-cpp":"mm",ocaml:"ml",pascal:"pas",perl:"pl",perl6:"p6",php:"php",plsql:"pls",po:"po",polar:"polar",postcss:"pcss",pot:"pot",potx:"potx",powerquery:"pq",powershell:"ps1",prisma:"prisma",prolog:"pl",properties:"properties",proto:"proto",protobuf:"proto",ps:"ps",ps1:"ps1",pug:"pug",puppet:"pp",purescript:"purs",py:"py",python:"py",ql:"ql",qml:"qml",qmldir:"qmldir",qss:"qss",r:"r",racket:"rkt",raku:"raku",razor:"cshtml",rb:"rb",reg:"reg",regex:"regex",regexp:"regexp",rel:"rel",riscv:"s",rs:"rs",rst:"rst",ruby:"rb",rust:"rs",sas:"sas",sass:"sass",scala:"scala",scheme:"scm",scss:"scss",sdbl:"sdbl",sh:"sh",shader:"shader",shaderlab:"shader",shell:"sh",shellscript:"sh",shellsession:"sh",smalltalk:"st",solidity:"sol",soy:"soy",sparql:"rq",spl:"spl",splunk:"spl",sql:"sql","ssh-config":"config",stata:"do",styl:"styl",stylus:"styl",svelte:"svelte",swift:"swift","system-verilog":"sv",systemd:"service",talon:"talon",talonscript:"talon",tasl:"tasl",tcl:"tcl",templ:"templ",terraform:"tf",tex:"tex",tf:"tf",tfvars:"tfvars",toml:"toml",ts:"ts","ts-tags":"ts",tsp:"tsp",tsv:"tsv",tsx:"tsx",turtle:"ttl",twig:"twig",typ:"typ",typescript:"ts",typespec:"tsp",typst:"typ",v:"v",vala:"vala",vb:"vb",verilog:"v",vhdl:"vhdl",vim:"vim",viml:"vim",vimscript:"vim",vue:"vue","vue-html":"html","vue-vine":"vine",vy:"vy",vyper:"vy",wasm:"wasm",wenyan:"wy",wgsl:"wgsl",wiki:"wiki",wikitext:"wiki",wit:"wit",wl:"wl",wolfram:"wl",xml:"xml",xsl:"xsl",yaml:"yaml",yml:"yml",zenscript:"zs",zig:"zig",zsh:"zsh",\u6587\u8A00:"wy"},J=({onDownload:e,onError:t,language:o,children:n,className:r,code:s,...i})=>{let{code:d}=(0,y.useContext)(X),{isAnimating:a}=(0,y.useContext)(I),l=s!=null?s:d,u=`file.${o&&o in Z?Z[o]:"txt"}`,b="text/plain",f=()=>{try{H(u,l,b),e==null||e()}catch(h){t==null||t(h)}};return(0,w.jsx)("button",{className:p("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",r),disabled:a,onClick:f,title:"Download file",type:"button",...i,children:n!=null?n:(0,w.jsx)(A.DownloadIcon,{size:14})})},F=({onCopy:e,onError:t,timeout:o=2e3,children:n,className:r,code:s,...i})=>{let[d,a]=(0,y.useState)(!1),l=(0,y.useRef)(0),{code:c}=(0,y.useContext)(X),{isAnimating:u}=(0,y.useContext)(I),b=s!=null?s:c,f=async()=>{var T;if(typeof window=="undefined"||!((T=navigator==null?void 0:navigator.clipboard)!=null&&T.writeText)){t==null||t(new Error("Clipboard API not available"));return}try{d||(await navigator.clipboard.writeText(b),a(!0),e==null||e(),l.current=window.setTimeout(()=>a(!1),o))}catch(v){t==null||t(v)}};(0,y.useEffect)(()=>()=>{window.clearTimeout(l.current)},[]);let h=d?A.CheckIcon:A.CopyIcon;return(0,w.jsx)("button",{className:p("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",r),disabled:u,onClick:f,type:"button",...i,children:n!=null?n:(0,w.jsx)(h,{size:14})})};var oe=require("lucide-react");var L=require("react/jsx-runtime"),ne=({node:e,className:t,src:o,alt:n,...r})=>{let s=async()=>{var i;if(o)try{let a=await(await fetch(o)).blob(),c=new URL(o,window.location.origin).pathname.split("/").pop()||"",u=c.includes(".")&&((i=c.split(".").pop())==null?void 0:i.length)<=4,b="";if(u)b=c;else{let f=a.type,h="png";f.includes("jpeg")||f.includes("jpg")?h="jpg":f.includes("png")?h="png":f.includes("svg")?h="svg":f.includes("gif")?h="gif":f.includes("webp")&&(h="webp"),b=`${(n||c||"image").replace(/\.[^/.]+$/,"")}.${h}`}H(b,a,a.type)}catch(d){console.error("Failed to download image:",d)}};return o?(0,L.jsxs)("div",{className:"group relative my-4 inline-block","data-streamdown":"image-wrapper",children:[(0,L.jsx)("img",{alt:n,className:p("max-w-full rounded-lg",t),"data-streamdown":"image",src:o,...r}),(0,L.jsx)("div",{className:"pointer-events-none absolute inset-0 hidden rounded-lg bg-black/10 group-hover:block"}),(0,L.jsx)("button",{className:p("absolute right-2 bottom-2 flex h-8 w-8 cursor-pointer items-center justify-center rounded-md border border-border bg-background/90 shadow-sm backdrop-blur-sm transition-all duration-200 hover:bg-background","opacity-0 group-hover:opacity-100"),onClick:s,title:"Download image",type:"button",children:(0,L.jsx)(oe.DownloadIcon,{size:14})})]}):null};var B=require("react");var C=require("react/jsx-runtime"),st=async e=>{let o={...{startOnLoad:!1,theme:"default",securityLevel:"strict",fontFamily:"monospace",suppressErrorRendering:!0},...e},r=(await import("mermaid")).default;return r.initialize(o),r},se=({chart:e,className:t,config:o})=>{let[n,r]=(0,B.useState)(null),[s,i]=(0,B.useState)(!0),[d,a]=(0,B.useState)(""),[l,c]=(0,B.useState)("");if((0,B.useEffect)(()=>{(async()=>{try{r(null),i(!0);let f=await st(o),h=e.split("").reduce(($,U)=>($<<5)-$+U.charCodeAt(0)|0,0),T=`mermaid-${Math.abs(h)}-${Date.now()}-${Math.random().toString(36).substring(2,9)}`,{svg:v}=await f.render(T,e);a(v),c(v)}catch(f){if(!(l||d)){let h=f instanceof Error?f.message:"Failed to render Mermaid chart";r(h)}}finally{i(!1)}})()},[e,o]),s&&!d&&!l)return(0,C.jsx)("div",{className:p("my-4 flex justify-center p-4",t),children:(0,C.jsxs)("div",{className:"flex items-center space-x-2 text-muted-foreground",children:[(0,C.jsx)("div",{className:"h-4 w-4 animate-spin rounded-full border-current border-b-2"}),(0,C.jsx)("span",{className:"text-sm",children:"Loading diagram..."})]})});if(n&&!d&&!l)return(0,C.jsxs)("div",{className:p("rounded-lg border border-red-200 bg-red-50 p-4",t),children:[(0,C.jsxs)("p",{className:"font-mono text-red-700 text-sm",children:["Mermaid Error: ",n]}),(0,C.jsxs)("details",{className:"mt-2",children:[(0,C.jsx)("summary",{className:"cursor-pointer text-red-600 text-xs",children:"Show Code"}),(0,C.jsx)("pre",{className:"mt-2 overflow-x-auto rounded bg-red-100 p-2 text-red-800 text-xs",children:e})]})]});let u=d||l;return(0,C.jsx)("div",{"aria-label":"Mermaid chart",className:p("my-4 flex justify-center",t),dangerouslySetInnerHTML:{__html:u},role:"img"})};var j=require("lucide-react"),P=require("react");var N=require("react/jsx-runtime");function re(e){var s,i;let t=[],o=[],n=e.querySelectorAll("thead th");for(let d of n)t.push(((s=d.textContent)==null?void 0:s.trim())||"");let r=e.querySelectorAll("tbody tr");for(let d of r){let a=[],l=d.querySelectorAll("td");for(let c of l)a.push(((i=c.textContent)==null?void 0:i.trim())||"");o.push(a)}return{headers:t,rows:o}}function ae(e){let{headers:t,rows:o}=e,n=s=>s.includes(",")||s.includes('"')||s.includes(`
`)?`"${s.replace(/"/g,'""')}"`:s,r=[];t.length>0&&r.push(t.map(n).join(","));for(let s of o)r.push(s.map(n).join(","));return r.join(`
`)}function ie(e){let{headers:t,rows:o}=e;if(t.length===0)return"";let n=[],r=t.map(s=>s.replace(/\|/g,"\\|"));n.push(`| ${r.join(" | ")} |`),n.push(`| ${t.map(()=>"---").join(" | ")} |`);for(let s of o){let i=[...s];for(;i.length<t.length;)i.push("");let d=i.map(a=>a.replace(/\|/g,"\\|"));n.push(`| ${d.join(" | ")} |`)}return n.join(`
`)}var le=({children:e,className:t,onCopy:o,onError:n,timeout:r=2e3,format:s="markdown"})=>{let[i,d]=(0,P.useState)(!1),a=(0,P.useRef)(0),{isAnimating:l}=(0,P.useContext)(I),c=async b=>{var f;if(typeof window=="undefined"||!((f=navigator==null?void 0:navigator.clipboard)!=null&&f.write)){n==null||n(new Error("Clipboard API not available"));return}try{if(!i){let T=b.currentTarget.closest('[data-streamdown="table-wrapper"]'),v=T==null?void 0:T.querySelector("table");if(!v){n==null||n(new Error("Table not found"));return}let $=re(v),U=new ClipboardItem({"text/plain":s==="markdown"?ie($):ae($),"text/html":new Blob([v.outerHTML],{type:"text/html"})});await navigator.clipboard.write([U]),d(!0),o==null||o(),a.current=window.setTimeout(()=>d(!1),r)}}catch(h){n==null||n(h)}};(0,P.useEffect)(()=>()=>{window.clearTimeout(a.current)},[]);let u=i?j.CheckIcon:j.CopyIcon;return(0,N.jsx)("button",{className:p("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:l,onClick:c,title:`Copy table as ${s}`,type:"button",children:e!=null?e:(0,N.jsx)(u,{size:14})})};var de=({children:e,className:t,onDownload:o,onError:n})=>{let[r,s]=(0,P.useState)(!1),i=(0,P.useRef)(null),{isAnimating:d}=(0,P.useContext)(I),a=l=>{var c;try{let u=(c=i.current)==null?void 0:c.closest('[data-streamdown="table-wrapper"]'),b=u==null?void 0:u.querySelector("table");if(!b){n==null||n(new Error("Table not found"));return}let f=re(b),h=l==="csv"?ae(f):ie(f);H(`table.${l==="csv"?"csv":"md"}`,h,l==="csv"?"text/csv":"text/markdown"),s(!1),o==null||o(l)}catch(u){n==null||n(u)}};return(0,P.useEffect)(()=>{let l=c=>{i.current&&!i.current.contains(c.target)&&s(!1)};return document.addEventListener("mousedown",l),()=>{document.removeEventListener("mousedown",l)}},[]),(0,N.jsxs)("div",{className:"relative",ref:i,children:[(0,N.jsx)("button",{className:p("cursor-pointer p-1 text-muted-foreground transition-all hover:text-foreground disabled:cursor-not-allowed disabled:opacity-50",t),disabled:d,onClick:()=>s(!r),title:"Download table",type:"button",children:e!=null?e:(0,N.jsx)(j.DownloadIcon,{size:14})}),r&&(0,N.jsxs)("div",{className:"absolute top-full right-0 z-10 mt-1 min-w-[120px] rounded-md border border-border bg-background shadow-lg",children:[(0,N.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>a("csv"),type:"button",children:"CSV"}),(0,N.jsx)("button",{className:"w-full px-3 py-2 text-left text-sm transition-colors hover:bg-muted/40",onClick:()=>a("markdown"),type:"button",children:"Markdown"})]})]})};var m=require("react/jsx-runtime"),rt=/language-([^\s]+)/;function _(e,t){if(!(e!=null&&e.position||t!=null&&t.position))return!0;if(!(e!=null&&e.position&&(t!=null&&t.position)))return!1;let o=e.position.start,n=t.position.start,r=e.position.end,s=t.position.end;return(o==null?void 0:o.line)===(n==null?void 0:n.line)&&(o==null?void 0:o.column)===(n==null?void 0:n.column)&&(r==null?void 0:r.line)===(s==null?void 0:s.line)&&(r==null?void 0:r.column)===(s==null?void 0:s.column)}function k(e,t){return e.className===t.className&&_(e.node,t.node)}var V=(e,t)=>typeof e=="boolean"?e:e[t]!==!1,G=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("ol",{className:p("ml-4 list-outside list-decimal whitespace-normal",t),"data-streamdown":"ordered-list",...n,children:e}),(e,t)=>k(e,t));G.displayName="MarkdownOl";var ce=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("li",{className:p("py-1",t),"data-streamdown":"list-item",...n,children:e}),(e,t)=>e.className===t.className&&_(e.node,t.node));ce.displayName="MarkdownLi";var me=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("ul",{className:p("ml-4 list-outside list-disc whitespace-normal",t),"data-streamdown":"unordered-list",...n,children:e}),(e,t)=>k(e,t));me.displayName="MarkdownUl";var pe=(0,g.memo)(({className:e,node:t,...o})=>(0,m.jsx)("hr",{className:p("my-6 border-border",e),"data-streamdown":"horizontal-rule",...o}),(e,t)=>k(e,t));pe.displayName="MarkdownHr";var ue=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("span",{className:p("font-semibold",t),"data-streamdown":"strong",...n,children:e}),(e,t)=>k(e,t));ue.displayName="MarkdownStrong";var ge=(0,g.memo)(({children:e,className:t,href:o,node:n,...r})=>{let s=o==="streamdown:incomplete-link";return(0,m.jsx)("a",{className:p("wrap-anywhere font-medium text-primary underline",t),"data-incomplete":s,"data-streamdown":"link",href:o,rel:"noreferrer",target:"_blank",...r,children:e})},(e,t)=>k(e,t)&&e.href===t.href);ge.displayName="MarkdownA";var fe=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("h1",{className:p("mt-6 mb-2 font-semibold text-3xl",t),"data-streamdown":"heading-1",...n,children:e}),(e,t)=>k(e,t));fe.displayName="MarkdownH1";var he=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("h2",{className:p("mt-6 mb-2 font-semibold text-2xl",t),"data-streamdown":"heading-2",...n,children:e}),(e,t)=>k(e,t));he.displayName="MarkdownH2";var be=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("h3",{className:p("mt-6 mb-2 font-semibold text-xl",t),"data-streamdown":"heading-3",...n,children:e}),(e,t)=>k(e,t));be.displayName="MarkdownH3";var ke=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("h4",{className:p("mt-6 mb-2 font-semibold text-lg",t),"data-streamdown":"heading-4",...n,children:e}),(e,t)=>k(e,t));ke.displayName="MarkdownH4";var ye=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("h5",{className:p("mt-6 mb-2 font-semibold text-base",t),"data-streamdown":"heading-5",...n,children:e}),(e,t)=>k(e,t));ye.displayName="MarkdownH5";var we=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("h6",{className:p("mt-6 mb-2 font-semibold text-sm",t),"data-streamdown":"heading-6",...n,children:e}),(e,t)=>k(e,t));we.displayName="MarkdownH6";var ve=(0,g.memo)(({children:e,className:t,node:o,...n})=>{let r=(0,g.useContext)(D),s=V(r,"table");return(0,m.jsxs)("div",{className:"my-4 flex flex-col space-y-2","data-streamdown":"table-wrapper",children:[s&&(0,m.jsxs)("div",{className:"flex items-center justify-end gap-1",children:[(0,m.jsx)(le,{}),(0,m.jsx)(de,{})]}),(0,m.jsx)("div",{className:"overflow-x-auto",children:(0,m.jsx)("table",{className:p("w-full border-collapse border border-border",t),"data-streamdown":"table",...n,children:e})})]})},(e,t)=>k(e,t));ve.displayName="MarkdownTable";var Me=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("thead",{className:p("bg-muted/80",t),"data-streamdown":"table-header",...n,children:e}),(e,t)=>k(e,t));Me.displayName="MarkdownThead";var Te=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("tbody",{className:p("divide-y divide-border bg-muted/40",t),"data-streamdown":"table-body",...n,children:e}),(e,t)=>k(e,t));Te.displayName="MarkdownTbody";var Ce=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("tr",{className:p("border-border border-b",t),"data-streamdown":"table-row",...n,children:e}),(e,t)=>k(e,t));Ce.displayName="MarkdownTr";var Pe=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("th",{className:p("whitespace-nowrap px-4 py-2 text-left font-semibold text-sm",t),"data-streamdown":"table-header-cell",...n,children:e}),(e,t)=>k(e,t));Pe.displayName="MarkdownTh";var Ne=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("td",{className:p("px-4 py-2 text-sm",t),"data-streamdown":"table-cell",...n,children:e}),(e,t)=>k(e,t));Ne.displayName="MarkdownTd";var Ie=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("blockquote",{className:p("my-4 border-muted-foreground/30 border-l-4 pl-4 text-muted-foreground italic",t),"data-streamdown":"blockquote",...n,children:e}),(e,t)=>k(e,t));Ie.displayName="MarkdownBlockquote";var Se=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("sup",{className:p("text-sm",t),"data-streamdown":"superscript",...n,children:e}),(e,t)=>k(e,t));Se.displayName="MarkdownSup";var Le=(0,g.memo)(({children:e,className:t,node:o,...n})=>(0,m.jsx)("sub",{className:p("text-sm",t),"data-streamdown":"subscript",...n,children:e}),(e,t)=>k(e,t));Le.displayName="MarkdownSub";var Be=(0,g.memo)(({children:e,className:t,node:o,...n})=>{if("data-footnotes"in n){let s=a=>{var b,f;if(!(0,g.isValidElement)(a))return!1;let l=Array.isArray(a.props.children)?a.props.children:[a.props.children],c=!1,u=!1;for(let h of l)if(h){if(typeof h=="string")h.trim()!==""&&(c=!0);else if((0,g.isValidElement)(h))if(((b=h.props)==null?void 0:b["data-footnote-backref"])!==void 0)u=!0;else{let T=Array.isArray(h.props.children)?h.props.children:[h.props.children];for(let v of T){if(typeof v=="string"&&v.trim()!==""){c=!0;break}if((0,g.isValidElement)(v)&&((f=v.props)==null?void 0:f["data-footnote-backref"])===void 0){c=!0;break}}}}return u&&!c},i=Array.isArray(e)?e.map(a=>{if(!(0,g.isValidElement)(a))return a;if(a.type===G){let c=(Array.isArray(a.props.children)?a.props.children:[a.props.children]).filter(u=>!s(u));return c.length===0?null:{...a,props:{...a.props,children:c}}}return a}):e;return(Array.isArray(i)?i.some(a=>a!==null):i!==null)?(0,m.jsx)("section",{className:t,...n,children:i}):null}return(0,m.jsx)("section",{className:t,...n,children:e})},(e,t)=>k(e,t));Be.displayName="MarkdownSection";var at=({node:e,className:t,children:o,...n})=>{var u,b,f;let r=((u=e==null?void 0:e.position)==null?void 0:u.start.line)===((b=e==null?void 0:e.position)==null?void 0:b.end.line),s=(0,g.useContext)(O),i=(0,g.useContext)(D);if(r)return(0,m.jsx)("code",{className:p("rounded bg-muted px-1.5 py-0.5 font-mono text-sm",t),"data-streamdown":"inline-code",...n,children:o});let d=t==null?void 0:t.match(rt),a=(f=d==null?void 0:d.at(1))!=null?f:"",l="";if((0,g.isValidElement)(o)&&o.props&&typeof o.props=="object"&&"children"in o.props&&typeof o.props.children=="string"?l=o.props.children:typeof o=="string"&&(l=o),a==="mermaid"){let h=V(i,"mermaid");return(0,m.jsxs)("div",{className:p("group relative my-4 h-auto rounded-xl border p-4",t),"data-streamdown":"mermaid-block",children:[h&&(0,m.jsxs)("div",{className:"flex items-center justify-end gap-2",children:[(0,m.jsx)(J,{code:l,language:a}),(0,m.jsx)(F,{code:l})]}),(0,m.jsx)(se,{chart:l,config:s})]})}let c=V(i,"code");return(0,m.jsx)(te,{className:p("overflow-x-auto border-t",t),code:l,"data-language":a,"data-streamdown":"code-block",language:a,preClassName:"overflow-x-auto font-mono text-xs p-4 bg-muted/40",children:c&&(0,m.jsxs)(m.Fragment,{children:[(0,m.jsx)(J,{code:l,language:a}),(0,m.jsx)(F,{})]})})},$e=(0,g.memo)(at,(e,t)=>e.className===t.className&&_(e.node,t.node));$e.displayName="MarkdownCode";var xe=(0,g.memo)(ne,(e,t)=>e.className===t.className&&_(e.node,t.node));xe.displayName="MarkdownImg";var He=(0,g.memo)(({children:e,className:t,node:o,...n})=>{var i;let s=(Array.isArray(e)?e:[e]).filter(d=>d!=null&&d!=="");return s.length===1&&(0,g.isValidElement)(s[0])&&((i=s[0].props.node)==null?void 0:i.tagName)==="img"?(0,m.jsx)(m.Fragment,{children:e}):(0,m.jsx)("p",{className:t,...n,children:e})},(e,t)=>k(e,t));He.displayName="MarkdownParagraph";var Ae={ol:G,li:ce,ul:me,hr:pe,strong:ue,a:ge,h1:fe,h2:he,h3:be,h4:ke,h5:ye,h6:we,table:ve,thead:Me,tbody:Te,tr:Ce,th:Pe,td:Ne,blockquote:Ie,code:$e,img:xe,pre:({children:e})=>e,sup:Se,sub:Le,p:He,section:Be};var je=require("marked"),Re=e=>{let t=/\[\^[^\]\s]{1,200}\](?!:)/.test(e),o=/\[\^[^\]\s]{1,200}\]:/.test(e);if(t||o)return[e];let n=je.Lexer.lex(e,{gfm:!0}),r=[],s=[];for(let i=0;i<n.length;i++){let d=n[i],a=d.raw;if(s.length>0){if(r[r.length-1]+=a,d.type==="html"){let l=a.match(/<\/(\w+)>/);if(l){let c=l[1];s[s.length-1]===c&&s.pop()}}continue}if(d.type==="html"&&d.block){let l=a.match(/<(\w+)[\s>]/);if(l){let c=l[1];a.includes(`</${c}>`)||s.push(c)}}if(a.trim()==="$$"&&r.length>0){let l=r.at(-1);if(!l){r.push(a);continue}let c=l.trimStart().startsWith("$$"),u=(l.match(/\$\$/g)||[]).length;if(c&&u%2===1){r[r.length-1]=l+a;continue}}if(r.length>0&&a.trimEnd().endsWith("$$")){let l=r.at(-1);if(!l){r.push(a);continue}let c=l.trimStart().startsWith("$$"),u=(l.match(/\$\$/g)||[]).length,b=(a.match(/\$\$/g)||[]).length;if(c&&u%2===1&&!a.trimStart().startsWith("$$")&&b===1){r[r.length-1]=l+a;continue}}r.push(a)}return r};var it=/(!?\[)([^\]]*?)$/,lt=/(\*\*)([^*]*?)$/,dt=/(__)([^_]*?)$/,ct=/(\*\*\*)([^*]*?)$/,mt=/(\*)([^*]*?)$/,pt=/(_)([^_]*?)$/,ut=/(`)([^`]*?)$/,gt=/(~~)([^~]*?)$/,W=e=>{let t=(e.match(/```/g)||[]).length;return t>0&&t%2===0&&e.includes(`
`)},ft=e=>{let t=/(!?)\[([^\]]+)\]\(([^)]+)$/,o=e.match(t);if(o){let r=o[1]==="!",s=o[2],i=o[3],d=e.lastIndexOf(`${r?"!":""}[${s}](${i}`),a=e.substring(0,d);return r?a:`${a}[${s}](streamdown:incomplete-link)`}let n=e.match(it);if(n){if(n[1].startsWith("!")){let s=e.lastIndexOf(n[1]);return e.substring(0,s)}return`${e}](streamdown:incomplete-link)`}return e},ht=e=>{if(W(e))return e;let t=e.match(lt);if(t){let o=t[2];if(!o||/^[\s_~*`]*$/.test(o))return e;let n=e.lastIndexOf(t[1]),s=e.substring(0,n).lastIndexOf(`
`),i=s===-1?0:s+1,d=e.substring(i,n);if(/^[\s]*[-*+][\s]+$/.test(d)&&o.includes(`
`))return e;if((e.match(/\*\*/g)||[]).length%2===1)return`${e}**`}return e},bt=e=>{let t=e.match(dt);if(t){let o=t[2];if(!o||/^[\s_~*`]*$/.test(o))return e;let n=e.lastIndexOf(t[1]),s=e.substring(0,n).lastIndexOf(`
`),i=s===-1?0:s+1,d=e.substring(i,n);if(/^[\s]*[-*+][\s]+$/.test(d)&&o.includes(`
`))return e;if((e.match(/__/g)||[]).length%2===1)return`${e}__`}return e},kt=e=>e.split("").reduce((t,o,n)=>{if(o==="*"){let r=e[n-1],s=e[n+1];if(r==="\\")return t;let i=n;for(let a=n-1;a>=0;a--){if(e[a]===`
`){i=a+1;break}if(a===0){i=0;break}}if(e.substring(i,n).trim()===""&&(s===" "||s==="	"))return t;if(r!=="*"&&s!=="*")return t+1}return t},0),yt=e=>{if(W(e))return e;if(e.match(mt)){let o=-1;for(let s=0;s<e.length;s++)if(e[s]==="*"&&e[s-1]!=="*"&&e[s+1]!=="*"){o=s;break}if(o===-1)return e;let n=e.substring(o+1);if(!n||/^[\s_~*`]*$/.test(n))return e;if(kt(e)%2===1)return`${e}*`}return e},De=(e,t)=>{let o=!1,n=!1;for(let r=0;r<e.length&&r<t;r++){if(e[r]==="\\"&&e[r+1]==="$"){r++;continue}e[r]==="$"&&(e[r+1]==="$"?(n=!n,r++,o=!1):n||(o=!o))}return o||n},wt=e=>e.split("").reduce((t,o,n)=>{if(o==="_"){let r=e[n-1],s=e[n+1];if(r==="\\"||De(e,n)||r&&s&&/[\p{L}\p{N}_]/u.test(r)&&/[\p{L}\p{N}_]/u.test(s))return t;if(r!=="_"&&s!=="_")return t+1}return t},0),vt=e=>{if(W(e))return e;if(e.match(pt)){let o=-1;for(let s=0;s<e.length;s++)if(e[s]==="_"&&e[s-1]!=="_"&&e[s+1]!=="_"&&e[s-1]!=="\\"&&!De(e,s)){let i=s>0?e[s-1]:"",d=s<e.length-1?e[s+1]:"";if(i&&d&&/[\p{L}\p{N}_]/u.test(i)&&/[\p{L}\p{N}_]/u.test(d))continue;o=s;break}if(o===-1)return e;let n=e.substring(o+1);if(!n||/^[\s_~*`]*$/.test(n))return e;if(wt(e)%2===1){let s=e.match(/\n+$/);return s?`${e.slice(0,-s[0].length)}_${s[0]}`:`${e}_`}}return e},Mt=(e,t)=>{let o=e.substring(t,t+3)==="```",n=t>0&&e.substring(t-1,t+2)==="```",r=t>1&&e.substring(t-2,t+1)==="```";return o||n||r},Tt=e=>{let t=0;for(let o=0;o<e.length;o++)e[o]==="`"&&!Mt(e,o)&&t++;return t},Ct=e=>{if(e.match(/^```[^`\n]*```?$/)&&!e.includes(`
`))return e.endsWith("``")&&!e.endsWith("```")?`${e}\``:e;let o=(e.match(/```/g)||[]).length,n=o%2===1;if(o>0&&o%2===0&&e.includes(`
`)||(e.endsWith("```\n")||e.endsWith("```"))&&o%2===0)return e;let r=e.match(ut);if(r&&!n){let s=r[2];if(!s||/^[\s_~*`]*$/.test(s))return e;if(Tt(e)%2===1)return`${e}\``}return e},Pt=e=>{let t=e.match(gt);if(t){let o=t[2];if(!o||/^[\s_~*`]*$/.test(o))return e;if((e.match(/~~/g)||[]).length%2===1)return`${e}~~`}return e};var Nt=e=>{if((e.match(/\$\$/g)||[]).length%2===0)return e;let o=e.indexOf("$$");return o!==-1&&e.indexOf(`
`,o)!==-1&&!e.endsWith(`
`)?`${e}
$$`:`${e}$$`},It=e=>{let t=0,o=e.match(/\*+/g)||[];for(let n of o){let r=n.length;r>=3&&(t+=Math.floor(r/3))}return t},St=e=>{if(W(e)||/^\*{4,}$/.test(e))return e;let t=e.match(ct);if(t){let o=t[2];if(!o||/^[\s_~*`]*$/.test(o))return e;if(It(e)%2===1)return`${e}***`}return e},qe=e=>{if(!e||typeof e!="string")return e;let t=e,o=ft(t);return o.endsWith("](streamdown:incomplete-link)")?o:(t=o,t=St(t),t=ht(t),t=bt(t),t=yt(t),t=vt(t),t=Ct(t),t=Pt(t),t=Nt(t),t)};var S=require("react/jsx-runtime"),Xe={harden:[ze.harden,{allowedImagePrefixes:["*"],allowedLinkPrefixes:["*"],defaultOrigin:void 0,allowDataImages:!0}],raw:Oe.default,katex:[_e.default,{errorColor:"var(--color-muted-foreground)"}]},Je={gfm:[We.default,{}],math:[Ue.default,{singleDollarTextMath:!1}]},E=(0,M.createContext)(["github-light","github-dark"]),O=(0,M.createContext)(void 0),D=(0,M.createContext)(!0),I=(0,M.createContext)({isAnimating:!1}),Fe=(0,M.memo)(({content:e,shouldParseIncompleteMarkdown:t,...o})=>{let n=(0,M.useMemo)(()=>typeof e=="string"&&t?qe(e.trim()):e,[e,t]);return(0,S.jsx)(Ee.default,{...o,children:n})},(e,t)=>e.content===t.content);Fe.displayName="Block";var Ve=(0,M.memo)(({children:e,parseIncompleteMarkdown:t=!0,components:o,rehypePlugins:n=Object.values(Xe),remarkPlugins:r=Object.values(Je),className:s,shikiTheme:i=["github-light","github-dark"],mermaidConfig:d,controls:a=!0,isAnimating:l=!1,...c})=>{let u=(0,M.useId)(),b=(0,M.useMemo)(()=>Re(typeof e=="string"?e:""),[e]);return(0,S.jsx)(E.Provider,{value:i,children:(0,S.jsx)(O.Provider,{value:d,children:(0,S.jsx)(D.Provider,{value:a,children:(0,S.jsx)(I.Provider,{value:{isAnimating:l},children:(0,S.jsx)("div",{className:p("space-y-4",s),children:b.map((f,h)=>(0,S.jsx)(Fe,{components:{...Ae,...o},content:f,rehypePlugins:n,remarkPlugins:r,shouldParseIncompleteMarkdown:t,...c},`${u}-block-${h}`))})})})})})},(e,t)=>e.children===t.children&&e.shikiTheme===t.shikiTheme&&e.isAnimating===t.isAnimating);Ve.displayName="Streamdown";0&&(module.exports={ControlsContext,MermaidConfigContext,ShikiThemeContext,Streamdown,StreamdownRuntimeContext,defaultRehypePlugins,defaultRemarkPlugins});
